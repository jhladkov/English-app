const learnWordsWrapper=document.querySelector(".wrapper");let numberSelectedWords=document.querySelector(".check");const moreWords=document.querySelector(".more"),checkNeedKnow=document.querySelector(".know"),checkAlreadyKnow=document.querySelector(".already-know");let learnWordInner,alreadyKnowButton,englishWord,rusWord,learnWord,alreadyKnowWordsArr=[],needKnowWordsArr=[],englishWordsArr=["able"," ability","about","above"," accept","according","account","across","act","action","activity","actually","add","address","administration","admit","adult","affect","after","again","against","age","agency","agent","ago","agree","agreement","ahead","air","all","allow","almost","alone","along","already","also","although","always","American","among"],rusWordsArr=["способный","способность","о","выше","принимать","в соответствии","учетная запись","через","действовать","действие","Мероприятия","фактически","Добавлять","адрес","администрация","признавать","взрослый","оказывать воздействие","после","очередной раз","против"," возраст","агентство"," агент","тому назад","дать согласие","соглашение","предстоящий","воздуха","все","позволять","почти","один"," вдоль","уже","также","хотя","всегда","Американец","среди"];const updateDOM=()=>{learnWordInner=Array.from(document.querySelectorAll(".learn-word-inner")),alreadyKnowButton=Array.from(document.querySelectorAll(".already")),englishWord=document.querySelectorAll(".english-word"),rusWord=document.querySelectorAll(".rus-word"),learnWord=document.querySelectorAll(".need-know")},addWords=(e,r)=>{r.reduce((t,a,o)=>10!==t?(learnWordsWrapper.insertAdjacentHTML("afterbegin",`\n                        <div class="learn-word-inner">\n                            <p class="english-word">${e[o]}</p>\n                            <hr>\n                            <p class="rus-word">${a}</p>\n                            <button class="learn-word need-know">Учить слово</button>\n                            <button class="learn-word already">Уже знаю</button>\n                        </div>\n                    `),e.splice(o,1),r.splice(o,1),addWordInAlreadyKnowList(),addWordInNeedKnowList(),++t):10,0)};moreWords.onclick=()=>{addWords(englishWordsArr,rusWordsArr)};const addWordInAlreadyKnowList=()=>{updateDOM(),alreadyKnowButton.forEach((e,r)=>{e.onclick=async()=>{learnWordInner[r].remove(),alreadyKnowWordsArr.push([englishWord[r].textContent,rusWord[r].textContent]),await setCheckDataInStorage(null,checkAlreadyKnow)}})},addWordInNeedKnowList=()=>{updateDOM(),learnWord.forEach((e,r)=>{e.onclick=async()=>{learnWordInner[r].remove(),needKnowWordsArr.push([englishWord[r].textContent,rusWord[r].textContent]),await setCheckDataInStorage(checkNeedKnow),numberSelectedWords.innerHTML=JSON.parse(localStorage.getItem("needKnow")).length,removeWordThatSelected(),blockUse()}})},createStartEnglishArr=e=>{let r=[];e.forEach(e=>r.push(e[0])),r.reduce((e,r)=>{let t=e.filter(e=>e!==r);return localStorage.setItem("startEnglishArr",JSON.stringify(t)),t},englishWordsArr)},createStartRusArr=e=>{let r=[];e.forEach(e=>r.push(e[1])),r.reduce((e,r)=>{let t=e.filter(e=>e!==r);return localStorage.setItem("startRusArr",JSON.stringify(t)),t},rusWordsArr)},assignNewValueStartingArr=()=>{rusWordsArr=JSON.parse(localStorage.getItem("startRusArr")),englishWordsArr=JSON.parse(localStorage.getItem("startEnglishArr"))},removeWordThatSelected=()=>{let e=JSON.parse(localStorage.getItem("alreadyKnow")),r=JSON.parse(localStorage.getItem("needKnow"));e&&(createStartEnglishArr(e),createStartRusArr(e),assignNewValueStartingArr()),r&&(createStartEnglishArr(r),createStartRusArr(r),assignNewValueStartingArr())},setCheckDataInStorage=async(e,r,t)=>{t&&(localStorage.getItem("checkAlreadyKnow")&&(document.querySelector(".already-know").innerHTML=localStorage.getItem("checkAlreadyKnow")),localStorage.getItem("checkNeedKnow")&&(document.querySelector(".know").innerHTML=localStorage.getItem("checkNeedKnow"),document.querySelector(".check").innerHTML=JSON.parse(localStorage.getItem("checkNeedKnow")))),r&&(await localStorage.setItem("alreadyKnow",JSON.stringify(alreadyKnowWordsArr)),await localStorage.setItem("checkAlreadyKnow",JSON.stringify(JSON.parse(localStorage.getItem("alreadyKnow")).length)),r.innerHTML=localStorage.getItem("checkAlreadyKnow")),e&&(await localStorage.setItem("needKnow",JSON.stringify(needKnowWordsArr)),await localStorage.setItem("checkNeedKnow",JSON.stringify(JSON.parse(localStorage.getItem("needKnow")).length)),e.innerHTML=localStorage.getItem("checkNeedKnow"))},blockUse=e=>{e||10===JSON.parse(localStorage.getItem("needKnow")).length?(localStorage.setItem("blockUse",!0),learnWordsWrapper.innerHTML="<p>На сегодня все, приходите завтра</p>",moreWords.disabled=!0,localStorage.setItem("tomorrow",JSON.stringify((new Date).getDate()+1))):moreWords.disabled=!1};window.onload=async()=>{removeWordThatSelected(),await addWords(englishWordsArr,rusWordsArr),await setCheckDataInStorage(null,null,!0),(new Date).getDate()===JSON.parse(localStorage.getItem("tomorrow"))&&localStorage.setItem("blockUse",!1),localStorage.getItem("alreadyKnow")&&(alreadyKnowWordsArr=JSON.parse(localStorage.getItem("alreadyKnow"))),localStorage.getItem("needKnow")&&(needKnowWordsArr=JSON.parse(localStorage.getItem("needKnow"))),JSON.parse(localStorage.getItem("blockUse"))&&blockUse(JSON.parse(localStorage.getItem("blockUse")))};